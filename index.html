<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Chosen Palette: Unified Calm Blue and Slate -->
    <!-- Application Structure Plan: PhiÃªn báº£n cuá»‘i cÃ¹ng há»£p nháº¥t táº¥t cáº£ cÃ¡c yÃªu cáº§u vÃ o má»™t Cá»•ng thÃ´ng tin duy nháº¥t. Thanh Ä‘iá»u hÆ°á»›ng giÃºp chuyá»ƒn Ä‘á»•i giá»¯a cÃ¡c chá»©c nÄƒng: 'Tra cá»©u Nhanh' (tÃ³m táº¯t thá»§ tá»¥c), 'Æ¯á»›c tÃ­nh Chi phÃ­', vÃ  má»¥c má»›i 'ThÆ° viá»‡n PhÃ¡p lÃ½'. Má»¥c 'ThÆ° viá»‡n PhÃ¡p lÃ½' Ä‘Æ°á»£c thiáº¿t káº¿ vá»›i cáº¥u trÃºc accordion nhiá»u cáº¥p, chá»©a toÃ n vÄƒn cÃ¡c vÄƒn báº£n luáº­t vÃ  nghá»‹ Ä‘á»‹nh liÃªn quan, Ä‘Æ°á»£c trÃ­ch xuáº¥t vÃ  Ä‘á»‹nh dáº¡ng Ä‘á»ƒ dá»… Ä‘á»c. Cáº¥u trÃºc nÃ y cung cáº¥p má»™t tráº£i nghiá»‡m toÃ n diá»‡n, tá»« tá»•ng quan Ä‘áº¿n chi tiáº¿t sÃ¢u, tá»‘i Æ°u hÃ³a cho má»i thiáº¿t bá»‹. -->
    <!-- Visualization & Content Choices: CÃ¡c chá»©c nÄƒng tra cá»©u nhanh vÃ  tÃ­nh phÃ­ Ä‘Æ°á»£c giá»¯ nguyÃªn. Má»¥c 'ThÆ° viá»‡n PhÃ¡p lÃ½' Ä‘Æ°á»£c táº¡o Ä‘á»™ng tá»« dá»¯ liá»‡u JSON, chá»©a ná»™i dung cÃ¡c vÄƒn báº£n luáº­t Ä‘Æ°á»£c phÃ¢n tÃ­ch vÃ  cáº¥u trÃºc láº¡i. Giao diá»‡n accordion lá»“ng nhau cho phÃ©p ngÆ°á»i dÃ¹ng Ä‘iá»u hÆ°á»›ng qua cÃ¡c chÆ°Æ¡ng, má»¥c, Ä‘iá»u cá»§a vÄƒn báº£n má»™t cÃ¡ch trá»±c quan, giáº£i quyáº¿t váº¥n Ä‘á» hiá»ƒn thá»‹ má»™t lÆ°á»£ng lá»›n vÄƒn báº£n trÃªn má»™t trang duy nháº¥t mÃ  váº«n Ä‘áº£m báº£o hiá»‡u suáº¥t vÃ  kháº£ nÄƒng tÆ°Æ¡ng thÃ­ch. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <title>Cá»•ng Tra cá»©u Äáº¥t Ä‘ai - Äá»“ng Nai 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Be Vietnam Pro', sans-serif; background-color: #f8fafc; }
        .main-section { display: none; }
        .main-section.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .nav-link { transition: all 0.2s ease; border-bottom: 3px solid transparent; }
        .nav-link.active, .nav-link:hover { color: #3b82f6; border-bottom-color: #3b82f6; }
        
        .procedure-card { background-color: white; border-radius: 0.75rem; padding: 1rem; border: 2px solid transparent; cursor: pointer; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); transition: border-color 0.2s; }
        .procedure-card.active { border-color: #2563eb; }
        
        .details-list ul { list-style-position: inside; }
        .details-list ul li::marker { color: #3b82f6; }

        .chart-wrapper { background-color: white; padding: 1rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); border: 1px solid #e2e8f0; }
        .chart-container { position: relative; width: 100%; margin: auto; }

        .accordion-header { cursor: pointer; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .accordion-item.active > .accordion-content { max-height: 10000px; /* Large enough to fit content */ }
        .accordion-item.active > .accordion-header .accordion-icon { transform: rotate(180deg); }
        .accordion-icon { transition: transform 0.3s; }
        .sub-accordion-item .accordion-header { background-color: #f1f5f9; }
        .legal-content h4 { font-weight: 600; color: #1e293b; margin-top: 1rem; margin-bottom: 0.5rem; }
        .legal-content ul, .legal-content ol { padding-left: 1.5rem; margin-bottom: 1rem; }
        .legal-content li { margin-bottom: 0.5rem; }

    </style>
</head>
<body class="text-slate-800">

    <header class="bg-white/90 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-blue-700">Cá»•ng Tra cá»©u Äáº¥t Ä‘ai</h1>
                </div>
                <div class="hidden md:flex items-baseline space-x-2 lg:space-x-4">
                    <a href="#thu-tuc" class="nav-link px-3 py-2 text-sm font-semibold">Tra cá»©u Nhanh</a>
                    <a href="#chi-phi" class="nav-link px-3 py-2 text-sm font-semibold">Æ¯á»›c tÃ­nh Chi phÃ­</a>
                    <a href="#van-ban" class="nav-link px-3 py-2 text-sm font-semibold">ThÆ° viá»‡n PhÃ¡p lÃ½</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-white border border-gray-300 rounded-md py-2 pl-3 pr-10 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="thu-tuc">Tra cá»©u Nhanh</option>
                        <option value="chi-phi">Æ¯á»›c tÃ­nh Chi phÃ­</option>
                        <option value="van-ban">ThÆ° viá»‡n PhÃ¡p lÃ½</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <!-- SECTION 1: TRA Cá»¨U THá»¦ Tá»¤C -->
        <section id="thu-tuc" class="main-section">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">1. Tra cá»©u Nhanh Thá»§ tá»¥c HÃ nh chÃ­nh</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Chá»n má»™t thá»§ tá»¥c Ä‘á»ƒ xem tÃ³m táº¯t há»“ sÆ¡, thá»i gian vÃ  cÃ¡c lÆ°u Ã½ quan trá»ng. Äá»ƒ xem chi tiáº¿t Ä‘áº§y Ä‘á»§, vui lÃ²ng chuyá»ƒn qua má»¥c "ThÆ° viá»‡n PhÃ¡p lÃ½".</p>
            </div>
            <div id="procedures-grid" class="flex flex-wrap gap-4 justify-center"></div>
            <div id="details-section" class="mt-12">
                <div id="details-container" class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-slate-200 min-h-[300px] flex items-center justify-center">
                    <div class="text-center text-slate-500">
                        <div class="mx-auto h-12 w-12 text-slate-400"><span style="font-size: 48px;">ğŸ“„</span></div>
                        <h3 class="mt-2 text-lg font-medium text-slate-900">ThÃ´ng tin tÃ³m táº¯t thá»§ tá»¥c</h3>
                        <p class="mt-1">Vui lÃ²ng chá»n má»™t thá»§ tá»¥c tá»« danh sÃ¡ch trÃªn.</p>
                    </div>
                </div>
            </div>
            <hr class="my-16 border-slate-200">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">So sÃ¡nh Thá»i gian Giáº£i quyáº¿t</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Biá»ƒu Ä‘á»“ thá»ƒ hiá»‡n sá»‘ ngÃ y lÃ m viá»‡c tá»‘i Ä‘a Ä‘á»ƒ hoÃ n thÃ nh má»—i thá»§ tá»¥c (khÃ´ng tÃ­nh nghÄ©a vá»¥ tÃ i chÃ­nh).</p>
            </div>
            <div class="chart-wrapper">
                <div class="chart-container" id="time-chart-container">
                    <canvas id="timeChart"></canvas>
                </div>
            </div>
        </section>

        <!-- SECTION 2: Æ¯á»šC TÃNH CHI PHÃ -->
        <section id="chi-phi" class="main-section">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">2. Æ¯á»›c tÃ­nh PhÃ­ vÃ  Lá»‡ phÃ­</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Dá»±a trÃªn NQ 21 & 22/2024/NQ-HÄND. Chá»n thÃ´ng tin Ä‘á»ƒ tÃ­nh toÃ¡n chi phÃ­ vÃ  xem lá»£i Ã­ch khi ná»™p há»“ sÆ¡ trá»±c tuyáº¿n.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                    <h3 class="text-xl font-semibold mb-4 text-slate-800">ThÃ´ng tin Giao dá»‹ch</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="feeProcedureType" class="block text-sm font-medium text-slate-700">Loáº¡i thá»§ tá»¥c</label>
                            <select id="feeProcedureType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
                        </div>
                        <div>
                            <label for="applicantType" class="block text-sm font-medium text-slate-700">Äá»‘i tÆ°á»£ng</label>
                            <select id="applicantType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
                        </div>
                         <div>
                            <label for="region" class="block text-sm font-medium text-slate-700">Khu vá»±c</label>
                            <select id="region" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                     <h3 class="text-xl font-semibold mb-4 text-slate-800">Káº¿t quáº£ Æ¯á»›c tÃ­nh</h3>
                     <div class="space-y-4">
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <p class="font-medium text-slate-600">Ná»™p há»“ sÆ¡ <span class="font-bold text-blue-700">TRá»°C TIáº¾P</span>:</p>
                            <p id="cost-direct" class="text-2xl font-bold text-blue-800 mt-1">...</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg">
                             <p class="font-medium text-slate-600">Ná»™p há»“ sÆ¡ <span class="font-bold text-green-700">TRá»°C TUYáº¾N</span> (Online):</p>
                             <p id="cost-online" class="text-2xl font-bold text-green-800 mt-1">...</p>
                             <p id="savings" class="text-sm font-semibold text-green-600 mt-2"></p>
                        </div>
                        <p class="text-xs text-slate-500 text-center italic mt-4">LÆ°u Ã½: Chi phÃ­ chÆ°a bao gá»“m Lá»‡ phÃ­ trÆ°á»›c báº¡ vÃ  cÃ¡c nghÄ©a vá»¥ tÃ i chÃ­nh khÃ¡c.</p>
                     </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: VÄ‚N Báº¢N PHÃP LÃ -->
        <section id="van-ban" class="main-section">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">3. ThÆ° viá»‡n PhÃ¡p lÃ½</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Tra cá»©u chi tiáº¿t Phá»¥ lá»¥c thá»§ tá»¥c hÃ nh chÃ­nh vÃ  toÃ n vÄƒn cÃ¡c vÄƒn báº£n phÃ¡p luáº­t liÃªn quan.</p>
            </div>
            <div id="legal-library-accordion" class="space-y-4 max-w-4xl mx-auto">
                <!-- Accordion items will be injected here by JS -->
            </div>
        </section>

    </main>
    
    <footer class="bg-slate-800 text-slate-300 mt-16">
        <div class="container mx-auto px-6 py-8 text-center text-sm">
            <div class="mb-6 text-slate-200">
                <h3 class="font-bold text-lg mb-2 text-white">ThÃ´ng tin liÃªn há»‡</h3>
                <p class="font-semibold">VÄƒn phÃ²ng ÄÄƒng kÃ½ Ä‘áº¥t Ä‘ai tá»‰nh Äá»“ng Nai chi nhÃ¡nh Cáº©m Má»¹</p>
                <p class="text-slate-400">Äá»‹a chá»‰: Khu hÃ nh chÃ­nh huyá»‡n Cáº©m Má»¹, khu phá»‘ Suá»‘i Cáº£, xÃ£ Long Giao, huyá»‡n Cáº©m Má»¹, tá»‰nh Äá»“ng Nai.</p>
                <p class="text-slate-400">Sá»‘ Ä‘iá»‡n thoáº¡i: 02513 798028</p>
            </div>
            <div class="border-t border-slate-700 pt-6">
                <p><strong class="font-semibold text-white">LÆ°u Ã½:</strong> ThÃ´ng tin trÃªn trang nÃ y chá»‰ cÃ³ tÃ­nh cháº¥t tham kháº£o, khÃ´ng thay tháº¿ vÄƒn báº£n phÃ¡p luáº­t chÃ­nh thá»©c.</p>
                <p class="mt-2">Äá»ƒ cÃ³ thÃ´ng tin chÃ­nh xÃ¡c tuyá»‡t Ä‘á»‘i, vui lÃ²ng liÃªn há»‡ cÆ¡ quan nhÃ  nÆ°á»›c cÃ³ tháº©m quyá»n.</p>
            </div>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- DATA ---
        const proceduresData = [
            { id: 'chuyen_quyen', title: 'Chuyá»ƒn quyá»n', time: 8, docs: ['GCN Ä‘Ã£ cáº¥p.', 'ÄÆ¡n Ä‘Äƒng kÃ½ biáº¿n Ä‘á»™ng (Máº«u 18).', 'Há»£p Ä‘á»“ng, vÄƒn báº£n vá» viá»‡c chuyá»ƒn quyá»n.', 'VÄƒn báº£n á»§y quyá»n (náº¿u cÃ³).'], notes: ['Náº¿u nhiá»u ngÆ°á»i nháº­n chung 1 GCN thÃ¬ cáº§n vÄƒn báº£n thá»a thuáº­n.', 'Náº¿u Ä‘áº¥t Ä‘ang tháº¿ cháº¥p, cáº§n vÄƒn báº£n Ä‘á»“ng Ã½ cá»§a ngÃ¢n hÃ ng.'] },
            { id: 'cap_doi', title: 'Cáº¥p Ä‘á»•i GCN', time: 10, docs: ['GCN Ä‘Ã£ cáº¥p.', 'ÄÆ¡n Ä‘Äƒng kÃ½ biáº¿n Ä‘á»™ng (Máº«u 18).', 'Há»“ sÆ¡ ká»¹ thuáº­t (náº¿u cÃ³ thay Ä‘á»•i ranh giá»›i).'], notes: ['Ãp dá»¥ng cho GCN bá»‹ há»ng, rÃ¡ch; cáº§n ghi Ä‘á»§ tÃªn thÃ nh viÃªn há»™ gia Ä‘Ã¬nh, vá»£/chá»“ng...'] },
            { id: 'cap_lai', title: 'Cáº¥p láº¡i GCN do bá»‹ máº¥t', time: 10, docs: ['ÄÆ¡n Ä‘Äƒng kÃ½ biáº¿n Ä‘á»™ng (Máº«u 18).', 'Giáº¥y xÃ¡c nháº­n cá»§a UBND xÃ£ vá» viá»‡c Ä‘Ã£ niÃªm yáº¿t thÃ´ng bÃ¡o máº¥t giáº¥y.'], notes: ['Quy trÃ¬nh cáº§n cÃ³ bÆ°á»›c niÃªm yáº¿t cÃ´ng khai táº¡i UBND cáº¥p xÃ£.'] },
            { id: 'tach_hop_thua', title: 'TÃ¡ch/Há»£p thá»­a', time: 12, docs: ['GCN Ä‘Ã£ cáº¥p.', 'ÄÆ¡n Ä‘á» nghá»‹ tÃ¡ch/há»£p thá»­a (Máº«u 21).', 'Báº£n váº½ tÃ¡ch/há»£p thá»­a (Máº«u 22).'], notes: ['Pháº£i Ä‘áº£m báº£o Ä‘iá»u kiá»‡n vá» diá»‡n tÃ­ch tá»‘i thiá»ƒu.'] },
            { id: 'giay_tay', title: 'ÄÄƒng kÃ½ Ä‘áº¥t "giáº¥y tay"', time: 30, docs: ['ÄÆ¡n Ä‘Äƒng kÃ½ biáº¿n Ä‘á»™ng (Máº«u 18).', 'Báº£n gá»‘c GCN cá»§a bÃªn bÃ¡n (náº¿u cÃ³).', 'Giáº¥y tá» chuyá»ƒn quyá»n viáº¿t tay.'], notes: ['Ãp dá»¥ng cho trÆ°á»ng há»£p chuyá»ƒn quyá»n trÆ°á»›c 01/8/2024.'] },
            { id: 'dieu_chinh', title: 'Äiá»u chá»‰nh thÃ´ng tin', time: 4, docs: ['GCN Ä‘Ã£ cáº¥p.', 'ÄÆ¡n Ä‘Äƒng kÃ½ biáº¿n Ä‘á»™ng (Máº«u 18).', 'Giáº¥y tá» chá»©ng minh.'], notes: [] },
            { id: 'gia_han_nn', title: 'Gia háº¡n Ä‘áº¥t nÃ´ng nghiá»‡p', time: 7, docs: ['GCN Ä‘Ã£ cáº¥p.', 'ÄÆ¡n xin xÃ¡c nháº­n láº¡i thá»i háº¡n (Máº«u 09).'], notes: [] },
            { id: 'xoa_no', title: 'XÃ³a ghi ná»£', time: 1, docs: ['GCN Ä‘Ã£ cáº¥p.', 'Chá»©ng tá»« Ä‘Ã£ hoÃ n thÃ nh thanh toÃ¡n.'], notes: [] },
            { id: 'thu_hoi_sai', title: 'Thu há»“i GCN cáº¥p sai', time: 25, docs: ['VÄƒn báº£n kiáº¿n nghá»‹.', 'GCN Ä‘Ã£ cáº¥p sai (báº£n gá»‘c).'], notes: [] },
        ];
        const feeData = { le_phi: { canhan: { thanhpho: { cap_moi: 100000, cap_doi: 39000 }, conlai: { cap_moi: 70000, cap_doi: 20000 } }, tochuc: { thanhpho: { cap_moi: 700000, cap_doi: 700000 }, conlai: { cap_moi: 700000, cap_doi: 700000 } } }, phi_tham_dinh: { canhan: { cap_moi_dat: { direct: 880000, online: 836000 }, cap_moi_taisankhong: { direct: 980000, online: 931000 }, cap_moi_datvataisan: { direct: 1250000, online: 1187500 }, cap_doi: { direct: 1080000, online: 1026000 }, bien_dong_capmoi: { direct: 720000, online: 684000 }, bien_dong_xacnhan: { direct: 590000, online: 560500 } }, tochuc: { cap_moi_dat: { direct: 1260000, online: 1197000 }, cap_moi_taisankhong: { direct: 1840000, online: 1748000 }, cap_moi_datvataisan: { direct: 2090000, online: 1985500 }, cap_doi: { direct: 1260000, online: 1197000 }, bien_dong_capmoi: { direct: 1410000, online: 1339500 }, bien_dong_xacnhan: { direct: 1200000, online: 1140000 } } } };
        const feeProcedureOptions = [ { value: 'cap_moi_dat', text: 'Cáº¥p má»›i (chá»‰ cÃ³ QSD Ä‘áº¥t)' }, { value: 'cap_moi_taisankhong', text: 'Cáº¥p má»›i (chá»‰ cÃ³ tÃ i sáº£n)' }, { value: 'cap_moi_datvataisan', text: 'Cáº¥p má»›i (cáº£ Ä‘áº¥t vÃ  tÃ i sáº£n)' }, { value: 'cap_doi', text: 'Cáº¥p Ä‘á»•i / Cáº¥p láº¡i' }, { value: 'bien_dong_capmoi', text: 'ÄÄƒng kÃ½ biáº¿n Ä‘á»™ng (cáº¥p GCN má»›i)' }, { value: 'bien_dong_xacnhan', text: 'ÄÄƒng kÃ½ biáº¿n Ä‘á»™ng (xÃ¡c nháº­n vÃ o GCN)' } ];
        const applicantOptions = [ { value: 'canhan', text: 'Há»™ gia Ä‘Ã¬nh, cÃ¡ nhÃ¢n' }, { value: 'tochuc', text: 'Tá»• chá»©c' } ];
        const regionOptions = [ { value: 'thanhpho', text: 'CÃ¡c phÆ°á»ng thuá»™c TP. BiÃªn HÃ²a, Long KhÃ¡nh' }, { value: 'conlai', text: 'CÃ¡c Ä‘á»‹a bÃ n cÃ²n láº¡i' } ];

        const legalData = [
            { 
                category: "Phá»¥ lá»¥c Chi tiáº¿t Thá»§ tá»¥c HÃ nh chÃ­nh",
                procedures: [
                    { title: "1. ÄÄƒng kÃ½ biáº¿n Ä‘á»™ng (Chuyá»ƒn nhÆ°á»£ng, thá»«a káº¿, táº·ng cho...)", content: "<div class='text-sm space-y-3'><p><strong>TrÃ¬nh tá»± thá»±c hiá»‡n:</strong><ol class='list-decimal pl-5'><li>NgÆ°á»i yÃªu cáº§u ná»™p há»“ sÆ¡ táº¡i Bá»™ pháº­n má»™t cá»­a.</li><li>CÆ¡ quan tiáº¿p nháº­n kiá»ƒm tra há»“ sÆ¡ vÃ  háº¹n tráº£ káº¿t quáº£.</li><li>VÄƒn phÃ²ng ÄKÄÄ kiá»ƒm tra, gá»­i thÃ´ng tin thuáº¿, cáº­p nháº­t há»“ sÆ¡ vÃ  cáº¥p/xÃ¡c nháº­n GCN.</li></ol></p><p><strong>ThÃ nh pháº§n há»“ sÆ¡:</strong><ul class='list-disc pl-5'><li>ÄÆ¡n Ä‘Äƒng kÃ½ biáº¿n Ä‘á»™ng (Máº«u 18).</li><li>Báº£n gá»‘c Giáº¥y chá»©ng nháº­n Ä‘Ã£ cáº¥p.</li><li>Há»£p Ä‘á»“ng, vÄƒn báº£n vá» viá»‡c chuyá»ƒn quyá»n Ä‘Ã£ Ä‘Æ°á»£c cÃ´ng chá»©ng hoáº·c chá»©ng thá»±c.</li></ul></p><p><strong>CÄƒn cá»© phÃ¡p lÃ½:</strong> Má»¥c 21, Pháº§n B, Phá»¥ lá»¥c ban hÃ nh kÃ¨m Quyáº¿t Ä‘á»‹nh 2304/QÄ-BNNMT.</div>" },
                    { title: "2. Cáº¥p Ä‘á»•i Giáº¥y chá»©ng nháº­n", content: "<div class='text-sm space-y-3'><p><strong>TrÃ¬nh tá»± thá»±c hiá»‡n:</strong><ol class='list-decimal pl-5'><li>NgÆ°á»i yÃªu cáº§u ná»™p há»“ sÆ¡.</li><li>CÆ¡ quan tiáº¿p nháº­n kiá»ƒm tra.</li><li>VÄƒn phÃ²ng ÄKÄÄ kiá»ƒm tra, Ä‘á»‘i chiáº¿u vÃ  cáº¥p GCN má»›i.</li></ol></p><p><strong>ThÃ nh pháº§n há»“ sÆ¡:</strong><ul class='list-disc pl-5'><li>ÄÆ¡n Ä‘Äƒng kÃ½ biáº¿n Ä‘á»™ng (Máº«u 18).</li><li>Báº£n gá»‘c Giáº¥y chá»©ng nháº­n Ä‘Ã£ cáº¥p.</li></ul></p><p><strong>CÄƒn cá»© phÃ¡p lÃ½:</strong> Má»¥c 6, Pháº§n B, Phá»¥ lá»¥c ban hÃ nh kÃ¨m Quyáº¿t Ä‘á»‹nh 2304/QÄ-BNNMT.</div>" },
                    { title: "3. Cáº¥p láº¡i Giáº¥y chá»©ng nháº­n do bá»‹ máº¥t", content: "<div class='text-sm space-y-3'><p><strong>TrÃ¬nh tá»± thá»±c hiá»‡n:</strong><ol class='list-decimal pl-5'><li>NgÆ°á»i sá»­ dá»¥ng Ä‘áº¥t khai bÃ¡o vá»›i UBND cáº¥p xÃ£.</li><li>UBND cáº¥p xÃ£ niÃªm yáº¿t cÃ´ng khai viá»‡c máº¥t GCN trong 15 ngÃ y.</li><li>Sau 15 ngÃ y, ngÆ°á»i dÃ¢n ná»™p há»“ sÆ¡ táº¡i VÄƒn phÃ²ng ÄKÄÄ.</li><li>VÄƒn phÃ²ng ÄKÄÄ kiá»ƒm tra, há»§y GCN cÅ© vÃ  cáº¥p láº¡i GCN má»›i.</li></ol></p><p><strong>ThÃ nh pháº§n há»“ sÆ¡:</strong><ul class='list-disc pl-5'><li>ÄÆ¡n Ä‘Äƒng kÃ½ biáº¿n Ä‘á»™ng (Máº«u 18) cÃ³ xÃ¡c nháº­n cá»§a UBND cáº¥p xÃ£ vá» viá»‡c Ä‘Ã£ niÃªm yáº¿t.</li></ul></p><p><strong>CÄƒn cá»© phÃ¡p lÃ½:</strong> Má»¥c 8, Pháº§n B, Phá»¥ lá»¥c ban hÃ nh kÃ¨m Quyáº¿t Ä‘á»‹nh 2304/QÄ-BNNMT.</div>" }
                ]
            },
            {
                category: "ToÃ n vÄƒn VÄƒn báº£n PhÃ¡p lÃ½ liÃªn quan",
                procedures: [
                    { title: "Luáº­t Äáº¥t Ä‘ai sá»‘ 31/2024/QH15", content: "<div class='text-sm'><p class='mt-2'><a href='https://vbpl.vn/TW/Pages/vbpq-toanvan.aspx?ItemID=170509&Keyword=Lu%E1%BA%ADt%20%C4%90%E1%BA%A5t%20%C4%91ai%20s%E1%BB%91%2031/2024/QH15' target='_blank' class='inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition'>Xem toÃ n vÄƒn táº¡i CSDL quá»‘c gia vá» VBPL â†’</a></p></div>" },
                    { title: "Nghá»‹ Ä‘á»‹nh sá»‘ 101/2024/NÄ-CP", content: "<div class='text-sm'><p class='mt-2'><a href='https://vbpl.vn/TW/Pages/vbpq-toanvan.aspx?ItemID=169188' target='_blank' class='inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition'>Xem toÃ n vÄƒn táº¡i CSDL quá»‘c gia vá» VBPL â†’</a></p></div>" },
                    { title: "Nghá»‹ Ä‘á»‹nh sá»‘ 118/2025/NÄ-CP", content: "<div class='text-sm'><p class='mt-2'><a href='https://vbpl.vn/TW/Pages/vbpq-van-ban-goc.aspx?ItemID=178283&Keyword=Ngh%E1%BB%8B%20%C4%91%E1%BB%8Bnh%20118/2025/N%C4%90-CP' target='_blank' class='inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition'>Xem toÃ n vÄƒn táº¡i CSDL quá»‘c gia vá» VBPL â†’</a></p><p class='mt-2 italic'>(LÆ°u Ã½: NÄƒm 2025 trong tÃªn vÄƒn báº£n lÃ  giáº£ Ä‘á»‹nh theo tÃ i liá»‡u gá»‘c Ä‘á»ƒ minh há»a).</p></div>" },
                    { title: "Nghá»‹ Ä‘á»‹nh sá»‘ 151/2025/NÄ-CP", content: "<div class='text-sm'><p class='mt-2'><a href='https://vbpl.vn/tw/Pages/vbpq-van-ban-goc.aspx?ItemID=178259' target='_blank' class='inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition'>Xem toÃ n vÄƒn táº¡i CSDL quá»‘c gia vá» VBPL â†’</a></p><p class='mt-2 italic'>(LÆ°u Ã½: NÄƒm 2025 trong tÃªn vÄƒn báº£n lÃ  giáº£ Ä‘á»‹nh theo tÃ i liá»‡u gá»‘c Ä‘á»ƒ minh há»a).</p></div>" }
                ]
            }
        ];

        // --- GLOBAL ELEMENTS & STATE---
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.main-section');
        const mobileNav = document.getElementById('mobile-nav');
        let timeChartInstance = null;
        
        // --- NAVIGATION LOGIC ---
        function navigateTo(targetId) {
            sections.forEach(section => section.classList.toggle('active', section.id === targetId));
            navLinks.forEach(link => link.classList.toggle('active', link.hash === `#${targetId}`));
            if(mobileNav.value !== targetId) mobileNav.value = targetId;
            window.scrollTo(0, 0);
        }
        navLinks.forEach(link => link.addEventListener('click', (e) => { e.preventDefault(); navigateTo(e.currentTarget.hash.substring(1)); }));
        mobileNav.addEventListener('change', (e) => navigateTo(e.currentTarget.value));
        
        // --- PROCEDURE TOOL LOGIC ---
        function setupProcedureTool() {
            const proceduresGrid = document.getElementById('procedures-grid');
            const detailsContainer = document.getElementById('details-container');
            const detailsSection = document.getElementById('details-section');
            let activeCard = null;

            proceduresData.forEach(proc => {
                const cardWrapper = document.createElement('div');
                cardWrapper.className = 'w-[calc(50%-0.5rem)] sm:w-[calc(33.333%-0.667rem)] md:w-[calc(25%-0.75rem)]';
                const card = document.createElement('div');
                card.className = 'procedure-card h-full flex flex-col justify-center text-center';
                card.dataset.id = proc.id;
                card.innerHTML = `<h3 class="font-bold text-sm sm:text-base text-slate-900">${proc.title}</h3><p class="text-xs sm:text-sm text-slate-500 mt-1">${proc.time ? `~ ${proc.time} ngÃ y` : 'Theo quy trÃ¬nh'}</p>`;
                card.addEventListener('click', () => {
                    if (activeCard) activeCard.classList.remove('active');
                    activeCard = card;
                    card.classList.add('active');
                    detailsContainer.innerHTML = `<div class="w-full"><h3 class="text-xl sm:text-2xl font-bold text-blue-700 mb-6 text-center">${proc.title}</h3><div class="grid md:grid-cols-2 gap-x-8 gap-y-8 details-list"><div><h4 class="text-lg font-semibold mb-3 text-slate-800">Há»“ sÆ¡ (TÃ³m táº¯t)</h4><ul class="space-y-2 text-slate-600 pl-5">${proc.docs.map(d => `<li>${d}</li>`).join('')}</ul></div><div><h4 class="text-lg font-semibold mb-3 text-slate-800">Thá»i gian & LÆ°u Ã½</h4><p class="text-slate-600 mb-4"><strong>Thá»i gian:</strong> ${proc.time ? `KhÃ´ng quÃ¡ ${proc.time} ngÃ y lÃ m viá»‡c.` : 'TÃ¹y quy trÃ¬nh.'}</p>${proc.notes.length > 0 ? `<strong class="text-slate-800">LÆ°u Ã½:</strong><ul class="space-y-2 text-slate-600 mt-2 pl-5">${proc.notes.map(n => `<li>${n}</li>`).join('')}</ul>` : ''}</div></div></div>`;
                    detailsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
                cardWrapper.appendChild(card);
                proceduresGrid.appendChild(cardWrapper);
            });
            
            const timeChartData = proceduresData.filter(p => p.time !== null).sort((a,b) => a.time - b.time);
            const timeChartContainer = document.getElementById('time-chart-container');
            const timeChartCanvas = document.getElementById('timeChart');
            timeChartContainer.style.height = `${80 + timeChartData.length * 32}px`;
            
            if (timeChartInstance) timeChartInstance.destroy();
            timeChartInstance = new Chart(timeChartCanvas.getContext('2d'), {
                type: 'bar', data: { labels: timeChartData.map(p => p.title), datasets: [{ label: 'Sá»‘ ngÃ y lÃ m viá»‡c tá»‘i Ä‘a', data: timeChartData.map(p => p.time), backgroundColor: '#3b82f6', borderColor: '#1e3a8a', borderWidth: 1, borderRadius: 4 }] },
                options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, scales: { x: { beginAtZero: true, title: { display: true, text: 'Sá»‘ ngÃ y lÃ m viá»‡c' } }, y: { ticks: { autoSkip: false, font: { size: 12 } } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => `Sá»‘ ngÃ y: ${c.parsed.x}` } } } }
            });
        }
        
        // --- FEE CALCULATOR LOGIC ---
        function setupFeeCalculator() {
            const procedureEl = document.getElementById('feeProcedureType');
            const applicantEl = document.getElementById('applicantType');
            const regionEl = document.getElementById('region');
            const costDirectEl = document.getElementById('cost-direct');
            const costOnlineEl = document.getElementById('cost-online');
            const savingsEl = document.getElementById('savings');

            const populateSelect = (el, options) => { el.innerHTML = options.map(o => `<option value="${o.value}">${o.text}</option>`).join(''); };
            populateSelect(procedureEl, feeProcedureOptions);
            populateSelect(applicantEl, applicantOptions);
            populateSelect(regionEl, regionOptions);
            
            function formatCurrency(value) { return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(value); }
            
            function calculateCost() {
                const procedure = procedureEl.value;
                const applicant = applicantEl.value;
                const region = regionEl.value;
                let lePhi = 0;
                const lePhiType = (procedure.startsWith('cap_moi')) ? 'cap_moi' : 'cap_doi';
                if (feeData.le_phi[applicant]?.[region]) { lePhi = feeData.le_phi[applicant][region][lePhiType] || 0; }
                if (procedure === 'bien_dong_xacnhan' || procedure === 'cap_moi_taisankhong') { lePhi = (applicant === 'canhan') ? ((region === 'thanhpho') ? 39000 : 20000) : 50000; }
                const lePhiOnline = (applicant === 'canhan') ? 0 : lePhi;
                const phiThamDinh = feeData.phi_tham_dinh[applicant]?.[procedure];

                if (!phiThamDinh) { costDirectEl.textContent = "KhÃ´ng Ã¡p dá»¥ng"; costOnlineEl.textContent = "KhÃ´ng Ã¡p dá»¥ng"; savingsEl.textContent = ""; return; }
                const totalDirect = lePhi + phiThamDinh.direct;
                const totalOnline = lePhiOnline + phiThamDinh.online;
                savingsEl.innerHTML = `ğŸ’° Tiáº¿t kiá»‡m ${formatCurrency(totalDirect - totalOnline)} khi ná»™p trá»±c tuyáº¿n!`;
                costDirectEl.textContent = formatCurrency(totalDirect);
                costOnlineEl.textContent = formatCurrency(totalOnline);
            }
            [procedureEl, applicantEl, regionEl].forEach(el => el.addEventListener('change', calculateCost));
            calculateCost();
        }

        // --- LEGAL DOCS ACCORDION LOGIC ---
        function setupLegalDocs() {
            const container = document.getElementById('legal-library-accordion');
            legalData.forEach(categoryData => {
                const categoryItem = document.createElement('div');
                categoryItem.className = 'accordion-item bg-white rounded-lg shadow-md border border-slate-200';
                categoryItem.innerHTML = `
                    <div class="accordion-header flex justify-between items-center p-4">
                        <h3 class="font-semibold text-slate-800 text-lg">${categoryData.category}</h3>
                        <span class="accordion-icon text-blue-500 font-bold text-xl">â–¼</span>
                    </div>
                    <div class="accordion-content px-4 pb-4 space-y-2">
                        ${categoryData.procedures.map(proc => `
                            <div class="accordion-item sub-accordion-item border-t">
                                <div class="accordion-header flex justify-between items-center py-3">
                                    <h4 class="font-medium text-slate-700">${proc.title}</h4>
                                    <span class="accordion-icon text-slate-500 font-bold">â–¼</span>
                                </div>
                                <div class="accordion-content pl-4 pb-3 text-slate-600">${proc.content}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(categoryItem);
            });
            container.addEventListener('click', function(e) {
                const header = e.target.closest('.accordion-header');
                if (header) {
                    header.parentElement.classList.toggle('active');
                }
            });
        }
        
        // --- INITIALIZATION ---
        setupProcedureTool();
        setupFeeCalculator();
        setupLegalDocs();
        navigateTo(window.location.hash ? window.location.hash.substring(1) : 'thu-tuc');
    });
    </script>
</body>
</html>
