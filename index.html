<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Chosen Palette: Unified Calm Blue and Slate -->
    <!-- Application Structure Plan: Phi√™n b·∫£n cu·ªëi c√πng h·ª£p nh·∫•t t·∫•t c·∫£ c√°c y√™u c·∫ßu v√†o m·ªôt C·ªïng th√¥ng tin duy nh·∫•t. Thanh ƒëi·ªÅu h∆∞·ªõng gi√∫p chuy·ªÉn ƒë·ªïi gi·ªØa c√°c ch·ª©c nƒÉng: 'Tra c·ª©u Nhanh' (t√≥m t·∫Øt th·ªß t·ª•c), '∆Ø·ªõc t√≠nh Chi ph√≠', v√† m·ª•c m·ªõi 'Th∆∞ vi·ªán Ph√°p l√Ω'. M·ª•c 'Th∆∞ vi·ªán Ph√°p l√Ω' ƒë∆∞·ª£c thi·∫øt k·∫ø v·ªõi c·∫•u tr√∫c accordion nhi·ªÅu c·∫•p, ch·ª©a to√†n vƒÉn c√°c vƒÉn b·∫£n lu·∫≠t v√† ngh·ªã ƒë·ªãnh li√™n quan, ƒë∆∞·ª£c tr√≠ch xu·∫•t v√† ƒë·ªãnh d·∫°ng ƒë·ªÉ d·ªÖ ƒë·ªçc. C·∫•u tr√∫c n√†y cung c·∫•p m·ªôt tr·∫£i nghi·ªám to√†n di·ªán, t·ª´ t·ªïng quan ƒë·∫øn chi ti·∫øt s√¢u, t·ªëi ∆∞u h√≥a cho m·ªçi thi·∫øt b·ªã. -->
    <!-- Visualization & Content Choices: C√°c ch·ª©c nƒÉng tra c·ª©u nhanh v√† t√≠nh ph√≠ ƒë∆∞·ª£c gi·ªØ nguy√™n. M·ª•c 'Th∆∞ vi·ªán Ph√°p l√Ω' ƒë∆∞·ª£c t·∫°o ƒë·ªông t·ª´ d·ªØ li·ªáu JSON, ch·ª©a n·ªôi dung c√°c vƒÉn b·∫£n lu·∫≠t ƒë∆∞·ª£c ph√¢n t√≠ch v√† c·∫•u tr√∫c l·∫°i. Giao di·ªán accordion l·ªìng nhau cho ph√©p ng∆∞·ªùi d√πng ƒëi·ªÅu h∆∞·ªõng qua c√°c ch∆∞∆°ng, m·ª•c, ƒëi·ªÅu c·ªßa vƒÉn b·∫£n m·ªôt c√°ch tr·ª±c quan, gi·∫£i quy·∫øt v·∫•n ƒë·ªÅ hi·ªÉn th·ªã m·ªôt l∆∞·ª£ng l·ªõn vƒÉn b·∫£n tr√™n m·ªôt trang duy nh·∫•t m√† v·∫´n ƒë·∫£m b·∫£o hi·ªáu su·∫•t v√† kh·∫£ nƒÉng t∆∞∆°ng th√≠ch. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <title>C·ªïng Tra c·ª©u ƒê·∫•t ƒëai - ƒê·ªìng Nai 2025</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Be+Vietnam+Pro:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
        html { scroll-behavior: smooth; }
        body { font-family: 'Be Vietnam Pro', sans-serif; background-color: #f8fafc; }
        .main-section { display: none; }
        .main-section.active { display: block; animation: fadeIn 0.5s ease-in-out; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        
        .nav-link { transition: all 0.2s ease; border-bottom: 3px solid transparent; }
        .nav-link.active, .nav-link:hover { color: #3b82f6; border-bottom-color: #3b82f6; }
        
        .procedure-card { background-color: white; border-radius: 0.75rem; padding: 1rem; border: 2px solid transparent; cursor: pointer; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1); transition: border-color 0.2s; }
        .procedure-card.active { border-color: #2563eb; }
        
        .details-list ul { list-style-position: inside; }
        .details-list ul li::marker { color: #3b82f6; }

        .chart-wrapper { background-color: white; padding: 1rem; border-radius: 1rem; box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1); border: 1px solid #e2e8f0; }
        .chart-container { position: relative; width: 100%; margin: auto; }

        .accordion-header { cursor: pointer; }
        .accordion-content { max-height: 0; overflow: hidden; transition: max-height 0.3s ease-out; }
        .accordion-item.active > .accordion-content { max-height: 10000px; /* Large enough to fit content */ }
        .accordion-item.active > .accordion-header .accordion-icon { transform: rotate(180deg); }
        .accordion-icon { transition: transform 0.3s; }
        .sub-accordion-item .accordion-header { background-color: #f1f5f9; }
        .legal-content h4 { font-weight: 600; color: #1e293b; margin-top: 1rem; margin-bottom: 0.5rem; }
        .legal-content ul, .legal-content ol { padding-left: 1.5rem; margin-bottom: 1rem; }
        .legal-content li { margin-bottom: 0.5rem; }

    </style>
</head>
<body class="text-slate-800">

    <header class="bg-white/90 backdrop-blur-lg shadow-sm sticky top-0 z-50">
        <nav class="container mx-auto px-4 sm:px-6">
            <div class="flex items-center justify-between h-16">
                <div class="flex-shrink-0">
                    <h1 class="text-xl font-bold text-blue-700">C·ªïng Tra c·ª©u ƒê·∫•t ƒëai</h1>
                </div>
                <div class="hidden md:flex items-baseline space-x-2 lg:space-x-4">
                    <a href="#thu-tuc" class="nav-link px-3 py-2 text-sm font-semibold">Tra c·ª©u Nhanh</a>
                    <a href="#chi-phi" class="nav-link px-3 py-2 text-sm font-semibold">∆Ø·ªõc t√≠nh Chi ph√≠</a>
                    <a href="#van-ban" class="nav-link px-3 py-2 text-sm font-semibold">Th∆∞ vi·ªán Ph√°p l√Ω</a>
                </div>
                <div class="md:hidden">
                    <select id="mobile-nav" class="bg-white border border-gray-300 rounded-md py-2 pl-3 pr-10 text-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500">
                        <option value="thu-tuc">Tra c·ª©u Nhanh</option>
                        <option value="chi-phi">∆Ø·ªõc t√≠nh Chi ph√≠</option>
                        <option value="van-ban">Th∆∞ vi·ªán Ph√°p l√Ω</option>
                    </select>
                </div>
            </div>
        </nav>
    </header>

    <main class="container mx-auto p-4 md:p-8">

        <!-- SECTION 1: TRA C·ª®U TH·ª¶ T·ª§C -->
        <section id="thu-tuc" class="main-section">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">1. Tra c·ª©u Nhanh Th·ªß t·ª•c H√†nh ch√≠nh</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Ch·ªçn m·ªôt th·ªß t·ª•c ƒë·ªÉ xem t√≥m t·∫Øt h·ªì s∆°, th·ªùi gian v√† c√°c l∆∞u √Ω quan tr·ªçng. ƒê·ªÉ xem chi ti·∫øt ƒë·∫ßy ƒë·ªß, vui l√≤ng chuy·ªÉn qua m·ª•c "Th∆∞ vi·ªán Ph√°p l√Ω".</p>
            </div>
            <div id="procedures-grid" class="flex flex-wrap gap-4 justify-center"></div>
            <div id="details-section" class="mt-12">
                <div id="details-container" class="bg-white p-6 md:p-8 rounded-xl shadow-lg border border-slate-200 min-h-[300px] flex items-center justify-center">
                    <div class="text-center text-slate-500">
                        <div class="mx-auto h-12 w-12 text-slate-400"><span style="font-size: 48px;">üìÑ</span></div>
                        <h3 class="mt-2 text-lg font-medium text-slate-900">Th√¥ng tin t√≥m t·∫Øt th·ªß t·ª•c</h3>
                        <p class="mt-1">Vui l√≤ng ch·ªçn m·ªôt th·ªß t·ª•c t·ª´ danh s√°ch tr√™n.</p>
                    </div>
                </div>
            </div>
            <hr class="my-16 border-slate-200">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">So s√°nh Th·ªùi gian Gi·∫£i quy·∫øt</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Bi·ªÉu ƒë·ªì th·ªÉ hi·ªán s·ªë ng√†y l√†m vi·ªác t·ªëi ƒëa ƒë·ªÉ ho√†n th√†nh m·ªói th·ªß t·ª•c (kh√¥ng t√≠nh nghƒ©a v·ª• t√†i ch√≠nh).</p>
            </div>
            <div class="chart-wrapper">
                <div class="chart-container" id="time-chart-container">
                    <canvas id="timeChart"></canvas>
                </div>
            </div>
        </section>

        <!-- SECTION 2: ∆Ø·ªöC T√çNH CHI PH√ç -->
        <section id="chi-phi" class="main-section">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">2. ∆Ø·ªõc t√≠nh Ph√≠ v√† L·ªá ph√≠</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">D·ª±a tr√™n NQ 21 & 22/2024/NQ-HƒêND. Ch·ªçn th√¥ng tin ƒë·ªÉ t√≠nh to√°n chi ph√≠ v√† xem l·ª£i √≠ch khi n·ªôp h·ªì s∆° tr·ª±c tuy·∫øn.</p>
            </div>
            <div class="grid grid-cols-1 lg:grid-cols-5 gap-8">
                <div class="lg:col-span-2 bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                    <h3 class="text-xl font-semibold mb-4 text-slate-800">Th√¥ng tin Giao d·ªãch</h3>
                    <div class="space-y-4">
                        <div>
                            <label for="feeProcedureType" class="block text-sm font-medium text-slate-700">Lo·∫°i th·ªß t·ª•c</label>
                            <select id="feeProcedureType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
                        </div>
                        <div>
                            <label for="applicantType" class="block text-sm font-medium text-slate-700">ƒê·ªëi t∆∞·ª£ng</label>
                            <select id="applicantType" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
                        </div>
                         <div>
                            <label for="region" class="block text-sm font-medium text-slate-700">Khu v·ª±c</label>
                            <select id="region" class="mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm rounded-md"></select>
                        </div>
                    </div>
                </div>
                <div class="lg:col-span-3 bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                     <h3 class="text-xl font-semibold mb-4 text-slate-800">K·∫øt qu·∫£ ∆Ø·ªõc t√≠nh</h3>
                     <div class="space-y-4">
                        <div class="p-4 bg-blue-50 rounded-lg">
                            <p class="font-medium text-slate-600">N·ªôp h·ªì s∆° <span class="font-bold text-blue-700">TR·ª∞C TI·∫æP</span>:</p>
                            <p id="cost-direct" class="text-2xl font-bold text-blue-800 mt-1">...</p>
                        </div>
                        <div class="p-4 bg-green-50 rounded-lg">
                             <p class="font-medium text-slate-600">N·ªôp h·ªì s∆° <span class="font-bold text-green-700">TR·ª∞C TUY·∫æN</span> (Online):</p>
                             <p id="cost-online" class="text-2xl font-bold text-green-800 mt-1">...</p>
                             <p id="savings" class="text-sm font-semibold text-green-600 mt-2"></p>
                        </div>
                        <p class="text-xs text-slate-500 text-center italic mt-4">L∆∞u √Ω: Chi ph√≠ ch∆∞a bao g·ªìm L·ªá ph√≠ tr∆∞·ªõc b·∫° v√† c√°c nghƒ©a v·ª• t√†i ch√≠nh kh√°c.</p>
                     </div>
                </div>
            </div>
        </section>

        <!-- SECTION 3: VƒÇN B·∫¢N PH√ÅP L√ù -->
        <section id="van-ban" class="main-section">
            <div class="text-center mb-10">
                <h2 class="text-2xl sm:text-3xl font-bold text-slate-900">3. Th∆∞ vi·ªán Ph√°p l√Ω</h2>
                <p class="mt-2 text-slate-600 max-w-3xl mx-auto">Tra c·ª©u chi ti·∫øt Ph·ª• l·ª•c th·ªß t·ª•c h√†nh ch√≠nh v√† to√†n vƒÉn c√°c vƒÉn b·∫£n ph√°p lu·∫≠t li√™n quan.</p>
            </div>
            <div id="legal-library-accordion" class="space-y-4 max-w-4xl mx-auto">
                <!-- Accordion items will be injected here by JS -->
            </div>
        </section>

    </main>
    
    <footer class="bg-slate-800 text-slate-300 mt-16">
        <div class="container mx-auto px-6 py-8 text-center text-sm">
            <div class="mb-6 text-slate-200">
                <h3 class="font-bold text-lg mb-2 text-white">Th√¥ng tin li√™n h·ªá</h3>
                <p class="font-semibold">VƒÉn ph√≤ng ƒêƒÉng k√Ω ƒë·∫•t ƒëai t·ªânh ƒê·ªìng Nai chi nh√°nh C·∫©m M·ªπ</p>
                <p class="text-slate-400">ƒê·ªãa ch·ªâ: Khu h√†nh ch√≠nh huy·ªán C·∫©m M·ªπ, khu ph·ªë Su·ªëi C·∫£, x√£ Long Giao, huy·ªán C·∫©m M·ªπ, t·ªânh ƒê·ªìng Nai.</p>
                <p class="text-slate-400">S·ªë ƒëi·ªán tho·∫°i: 02513 798028</p>
            </div>
            <div class="border-t border-slate-700 pt-6">
                <p><strong class="font-semibold text-white">L∆∞u √Ω:</strong> Th√¥ng tin tr√™n trang n√†y ch·ªâ c√≥ t√≠nh ch·∫•t tham kh·∫£o, kh√¥ng thay th·∫ø vƒÉn b·∫£n ph√°p lu·∫≠t ch√≠nh th·ª©c.</p>
                <p class="mt-2">ƒê·ªÉ c√≥ th√¥ng tin ch√≠nh x√°c tuy·ªát ƒë·ªëi, vui l√≤ng li√™n h·ªá c∆° quan nh√† n∆∞·ªõc c√≥ th·∫©m quy·ªÅn.</p>
            </div>
        </div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        // --- DATA ---
        const proceduresData = [
            { id: 'chuyen_quyen', title: 'Chuy·ªÉn quy·ªÅn', time: 8, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'H·ª£p ƒë·ªìng, vƒÉn b·∫£n v·ªÅ vi·ªác chuy·ªÉn quy·ªÅn.', 'VƒÉn b·∫£n ·ªßy quy·ªÅn (n·∫øu c√≥).'], notes: ['N·∫øu nhi·ªÅu ng∆∞·ªùi nh·∫≠n chung 1 GCN th√¨ c·∫ßn vƒÉn b·∫£n th·ªèa thu·∫≠n.', 'N·∫øu ƒë·∫•t ƒëang th·∫ø ch·∫•p, c·∫ßn vƒÉn b·∫£n ƒë·ªìng √Ω c·ªßa ng√¢n h√†ng.'] },
            { id: 'cap_doi', title: 'C·∫•p ƒë·ªïi GCN', time: 10, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'H·ªì s∆° k·ªπ thu·∫≠t (n·∫øu c√≥ thay ƒë·ªïi ranh gi·ªõi).'], notes: ['√Åp d·ª•ng cho GCN b·ªã h·ªèng, r√°ch; c·∫ßn ghi ƒë·ªß t√™n th√†nh vi√™n h·ªô gia ƒë√¨nh, v·ª£/ch·ªìng...'] },
            { id: 'cap_lai', title: 'C·∫•p l·∫°i GCN do b·ªã m·∫•t', time: 10, docs: ['ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'Gi·∫•y x√°c nh·∫≠n c·ªßa UBND x√£ v·ªÅ vi·ªác ƒë√£ ni√™m y·∫øt th√¥ng b√°o m·∫•t gi·∫•y.'], notes: ['Quy tr√¨nh c·∫ßn c√≥ b∆∞·ªõc ni√™m y·∫øt c√¥ng khai t·∫°i UBND c·∫•p x√£.'] },
            { id: 'tach_hop_thua', title: 'T√°ch/H·ª£p th·ª≠a', time: 12, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒë·ªÅ ngh·ªã t√°ch/h·ª£p th·ª≠a (M·∫´u 21).', 'B·∫£n v·∫Ω t√°ch/h·ª£p th·ª≠a (M·∫´u 22).'], notes: ['Ph·∫£i ƒë·∫£m b·∫£o ƒëi·ªÅu ki·ªán v·ªÅ di·ªán t√≠ch t·ªëi thi·ªÉu.'] },
            { id: 'giay_tay', title: 'ƒêƒÉng k√Ω ƒë·∫•t "gi·∫•y tay"', time: 30, docs: ['ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'B·∫£n g·ªëc GCN c·ªßa b√™n b√°n (n·∫øu c√≥).', 'Gi·∫•y t·ªù chuy·ªÉn quy·ªÅn vi·∫øt tay.'], notes: ['√Åp d·ª•ng cho tr∆∞·ªùng h·ª£p chuy·ªÉn quy·ªÅn tr∆∞·ªõc 01/8/2024.'] },
            { id: 'dieu_chinh', title: 'ƒêi·ªÅu ch·ªânh th√¥ng tin', time: 4, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).', 'Gi·∫•y t·ªù ch·ª©ng minh.'], notes: [] },
            { id: 'gia_han_nn', title: 'Gia h·∫°n ƒë·∫•t n√¥ng nghi·ªáp', time: 7, docs: ['GCN ƒë√£ c·∫•p.', 'ƒê∆°n xin x√°c nh·∫≠n l·∫°i th·ªùi h·∫°n (M·∫´u 09).'], notes: [] },
            { id: 'xoa_no', title: 'X√≥a ghi n·ª£', time: 1, docs: ['GCN ƒë√£ c·∫•p.', 'Ch·ª©ng t·ª´ ƒë√£ ho√†n th√†nh thanh to√°n.'], notes: [] },
            { id: 'thu_hoi_sai', title: 'Thu h·ªìi GCN c·∫•p sai', time: 25, docs: ['VƒÉn b·∫£n ki·∫øn ngh·ªã.', 'GCN ƒë√£ c·∫•p sai (b·∫£n g·ªëc).'], notes: [] },
        ];
        const feeData = { le_phi: { canhan: { thanhpho: { cap_moi: 100000, cap_doi: 39000 }, conlai: { cap_moi: 70000, cap_doi: 20000 } }, tochuc: { thanhpho: { cap_moi: 700000, cap_doi: 700000 }, conlai: { cap_moi: 700000, cap_doi: 700000 } } }, phi_tham_dinh: { canhan: { cap_moi_dat: { direct: 880000, online: 836000 }, cap_moi_taisankhong: { direct: 980000, online: 931000 }, cap_moi_datvataisan: { direct: 1250000, online: 1187500 }, cap_doi: { direct: 1080000, online: 1026000 }, bien_dong_capmoi: { direct: 720000, online: 684000 }, bien_dong_xacnhan: { direct: 590000, online: 560500 } }, tochuc: { cap_moi_dat: { direct: 1260000, online: 1197000 }, cap_moi_taisankhong: { direct: 1840000, online: 1748000 }, cap_moi_datvataisan: { direct: 2090000, online: 1985500 }, cap_doi: { direct: 1260000, online: 1197000 }, bien_dong_capmoi: { direct: 1410000, online: 1339500 }, bien_dong_xacnhan: { direct: 1200000, online: 1140000 } } } };
        const feeProcedureOptions = [ { value: 'cap_moi_dat', text: 'C·∫•p m·ªõi (ch·ªâ c√≥ QSD ƒë·∫•t)' }, { value: 'cap_moi_taisankhong', text: 'C·∫•p m·ªõi (ch·ªâ c√≥ t√†i s·∫£n)' }, { value: 'cap_moi_datvataisan', text: 'C·∫•p m·ªõi (c·∫£ ƒë·∫•t v√† t√†i s·∫£n)' }, { value: 'cap_doi', text: 'C·∫•p ƒë·ªïi / C·∫•p l·∫°i' }, { value: 'bien_dong_capmoi', text: 'ƒêƒÉng k√Ω bi·∫øn ƒë·ªông (c·∫•p GCN m·ªõi)' }, { value: 'bien_dong_xacnhan', text: 'ƒêƒÉng k√Ω bi·∫øn ƒë·ªông (x√°c nh·∫≠n v√†o GCN)' } ];
        const applicantOptions = [ { value: 'canhan', text: 'H·ªô gia ƒë√¨nh, c√° nh√¢n' }, { value: 'tochuc', text: 'T·ªï ch·ª©c' } ];
        const regionOptions = [ { value: 'thanhpho', text: 'C√°c ph∆∞·ªùng thu·ªôc TP. Bi√™n H√≤a, Long Kh√°nh' }, { value: 'conlai', text: 'C√°c ƒë·ªãa b√†n c√≤n l·∫°i' } ];

        const legalData = [
            { 
                category: "Ph·ª• l·ª•c Chi ti·∫øt Th·ªß t·ª•c H√†nh ch√≠nh",
                procedures: [
                    { title: "1. ƒêƒÉng k√Ω bi·∫øn ƒë·ªông (Chuy·ªÉn nh∆∞·ª£ng, th·ª´a k·∫ø, t·∫∑ng cho...)", content: "<div class='text-sm space-y-3'><p><strong>Tr√¨nh t·ª± th·ª±c hi·ªán:</strong><ol class='list-decimal pl-5'><li>Ng∆∞·ªùi y√™u c·∫ßu n·ªôp h·ªì s∆° t·∫°i B·ªô ph·∫≠n m·ªôt c·ª≠a.</li><li>C∆° quan ti·∫øp nh·∫≠n ki·ªÉm tra h·ªì s∆° v√† h·∫πn tr·∫£ k·∫øt qu·∫£.</li><li>VƒÉn ph√≤ng ƒêKƒêƒê ki·ªÉm tra, g·ª≠i th√¥ng tin thu·∫ø, c·∫≠p nh·∫≠t h·ªì s∆° v√† c·∫•p/x√°c nh·∫≠n GCN.</li></ol></p><p><strong>Th√†nh ph·∫ßn h·ªì s∆°:</strong><ul class='list-disc pl-5'><li>ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).</li><li>B·∫£n g·ªëc Gi·∫•y ch·ª©ng nh·∫≠n ƒë√£ c·∫•p.</li><li>H·ª£p ƒë·ªìng, vƒÉn b·∫£n v·ªÅ vi·ªác chuy·ªÉn quy·ªÅn ƒë√£ ƒë∆∞·ª£c c√¥ng ch·ª©ng ho·∫∑c ch·ª©ng th·ª±c.</li></ul></p><p><strong>CƒÉn c·ª© ph√°p l√Ω:</strong> M·ª•c 21, Ph·∫ßn B, Ph·ª• l·ª•c ban h√†nh k√®m Quy·∫øt ƒë·ªãnh 2304/Qƒê-BNNMT.</div>" },
                    { title: "2. C·∫•p ƒë·ªïi Gi·∫•y ch·ª©ng nh·∫≠n", content: "<div class='text-sm space-y-3'><p><strong>Tr√¨nh t·ª± th·ª±c hi·ªán:</strong><ol class='list-decimal pl-5'><li>Ng∆∞·ªùi y√™u c·∫ßu n·ªôp h·ªì s∆°.</li><li>C∆° quan ti·∫øp nh·∫≠n ki·ªÉm tra.</li><li>VƒÉn ph√≤ng ƒêKƒêƒê ki·ªÉm tra, ƒë·ªëi chi·∫øu v√† c·∫•p GCN m·ªõi.</li></ol></p><p><strong>Th√†nh ph·∫ßn h·ªì s∆°:</strong><ul class='list-disc pl-5'><li>ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18).</li><li>B·∫£n g·ªëc Gi·∫•y ch·ª©ng nh·∫≠n ƒë√£ c·∫•p.</li></ul></p><p><strong>CƒÉn c·ª© ph√°p l√Ω:</strong> M·ª•c 6, Ph·∫ßn B, Ph·ª• l·ª•c ban h√†nh k√®m Quy·∫øt ƒë·ªãnh 2304/Qƒê-BNNMT.</div>" },
                    { title: "3. C·∫•p l·∫°i Gi·∫•y ch·ª©ng nh·∫≠n do b·ªã m·∫•t", content: "<div class='text-sm space-y-3'><p><strong>Tr√¨nh t·ª± th·ª±c hi·ªán:</strong><ol class='list-decimal pl-5'><li>Ng∆∞·ªùi s·ª≠ d·ª•ng ƒë·∫•t khai b√°o v·ªõi UBND c·∫•p x√£.</li><li>UBND c·∫•p x√£ ni√™m y·∫øt c√¥ng khai vi·ªác m·∫•t GCN trong 15 ng√†y.</li><li>Sau 15 ng√†y, ng∆∞·ªùi d√¢n n·ªôp h·ªì s∆° t·∫°i VƒÉn ph√≤ng ƒêKƒêƒê.</li><li>VƒÉn ph√≤ng ƒêKƒêƒê ki·ªÉm tra, h·ªßy GCN c≈© v√† c·∫•p l·∫°i GCN m·ªõi.</li></ol></p><p><strong>Th√†nh ph·∫ßn h·ªì s∆°:</strong><ul class='list-disc pl-5'><li>ƒê∆°n ƒëƒÉng k√Ω bi·∫øn ƒë·ªông (M·∫´u 18) c√≥ x√°c nh·∫≠n c·ªßa UBND c·∫•p x√£ v·ªÅ vi·ªác ƒë√£ ni√™m y·∫øt.</li></ul></p><p><strong>CƒÉn c·ª© ph√°p l√Ω:</strong> M·ª•c 8, Ph·∫ßn B, Ph·ª• l·ª•c ban h√†nh k√®m Quy·∫øt ƒë·ªãnh 2304/Qƒê-BNNMT.</div>" }
                ]
            },
            {
                category: "To√†n vƒÉn VƒÉn b·∫£n Ph√°p l√Ω li√™n quan",
                procedures: [
                    { title: "Lu·∫≠t ƒê·∫•t ƒëai s·ªë 31/2024/QH15", content: "<div class='text-sm'><p class='mt-2'><a href='https://vbpl.vn/TW/Pages/vbpq-toanvan.aspx?ItemID=170509&Keyword=Lu%E1%BA%ADt%20%C4%90%E1%BA%A5t%20%C4%91ai%20s%E1%BB%91%2031/2024/QH15' target='_blank' class='inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition'>Xem to√†n vƒÉn t·∫°i CSDL qu·ªëc gia v·ªÅ VBPL ‚Üí</a></p></div>" },
                    { title: "Ngh·ªã ƒë·ªãnh s·ªë 101/2024/Nƒê-CP", content: "<div class='text-sm'><p class='mt-2'><a href='https://vbpl.vn/TW/Pages/vbpq-toanvan.aspx?ItemID=169188' target='_blank' class='inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition'>Xem to√†n vƒÉn t·∫°i CSDL qu·ªëc gia v·ªÅ VBPL ‚Üí</a></p></div>" },
                    { title: "Ngh·ªã ƒë·ªãnh s·ªë 118/2025/Nƒê-CP", content: "<div class='text-sm'><p class='mt-2'><a href='https://vbpl.vn/TW/Pages/vbpq-van-ban-goc.aspx?ItemID=178283&Keyword=Ngh%E1%BB%8B%20%C4%91%E1%BB%8Bnh%20118/2025/N%C4%90-CP' target='_blank' class='inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition'>Xem to√†n vƒÉn t·∫°i CSDL qu·ªëc gia v·ªÅ VBPL ‚Üí</a></p><p class='mt-2 italic'>(L∆∞u √Ω: NƒÉm 2025 trong t√™n vƒÉn b·∫£n l√† gi·∫£ ƒë·ªãnh theo t√†i li·ªáu g·ªëc ƒë·ªÉ minh h·ªça).</p></div>" },
                    { title: "Ngh·ªã ƒë·ªãnh s·ªë 151/2025/Nƒê-CP", content: "<div class='text-sm'><p class='mt-2'><a href='https://vbpl.vn/tw/Pages/vbpq-van-ban-goc.aspx?ItemID=178259' target='_blank' class='inline-block bg-blue-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-blue-700 transition'>Xem to√†n vƒÉn t·∫°i CSDL qu·ªëc gia v·ªÅ VBPL ‚Üí</a></p><p class='mt-2 italic'>(L∆∞u √Ω: NƒÉm 2025 trong t√™n vƒÉn b·∫£n l√† gi·∫£ ƒë·ªãnh theo t√†i li·ªáu g·ªëc ƒë·ªÉ minh h·ªça).</p></div>" }
                ]
            }
        ];

        // --- GLOBAL ELEMENTS & STATE---
        const navLinks = document.querySelectorAll('.nav-link');
        const sections = document.querySelectorAll('.main-section');
        const mobileNav = document.getElementById('mobile-nav');
        let timeChartInstance = null;
        
        // --- NAVIGATION LOGIC ---
        function navigateTo(targetId) {
            sections.forEach(section => section.classList.toggle('active', section.id === targetId));
            navLinks.forEach(link => link.classList.toggle('active', link.hash === `#${targetId}`));
            if(mobileNav.value !== targetId) mobileNav.value = targetId;
            window.scrollTo(0, 0);
        }
        navLinks.forEach(link => link.addEventListener('click', (e) => { e.preventDefault(); navigateTo(e.currentTarget.hash.substring(1)); }));
        mobileNav.addEventListener('change', (e) => navigateTo(e.currentTarget.value));
        
        // --- PROCEDURE TOOL LOGIC ---
        function setupProcedureTool() {
            const proceduresGrid = document.getElementById('procedures-grid');
            const detailsContainer = document.getElementById('details-container');
            const detailsSection = document.getElementById('details-section');
            let activeCard = null;

            proceduresData.forEach(proc => {
                const cardWrapper = document.createElement('div');
                cardWrapper.className = 'w-[calc(50%-0.5rem)] sm:w-[calc(33.333%-0.667rem)] md:w-[calc(25%-0.75rem)]';
                const card = document.createElement('div');
                card.className = 'procedure-card h-full flex flex-col justify-center text-center';
                card.dataset.id = proc.id;
                card.innerHTML = `<h3 class="font-bold text-sm sm:text-base text-slate-900">${proc.title}</h3><p class="text-xs sm:text-sm text-slate-500 mt-1">${proc.time ? `~ ${proc.time} ng√†y` : 'Theo quy tr√¨nh'}</p>`;
                card.addEventListener('click', () => {
                    if (activeCard) activeCard.classList.remove('active');
                    activeCard = card;
                    card.classList.add('active');
                    detailsContainer.innerHTML = `<div class="w-full"><h3 class="text-xl sm:text-2xl font-bold text-blue-700 mb-6 text-center">${proc.title}</h3><div class="grid md:grid-cols-2 gap-x-8 gap-y-8 details-list"><div><h4 class="text-lg font-semibold mb-3 text-slate-800">H·ªì s∆° (T√≥m t·∫Øt)</h4><ul class="space-y-2 text-slate-600 pl-5">${proc.docs.map(d => `<li>${d}</li>`).join('')}</ul></div><div><h4 class="text-lg font-semibold mb-3 text-slate-800">Th·ªùi gian & L∆∞u √Ω</h4><p class="text-slate-600 mb-4"><strong>Th·ªùi gian:</strong> ${proc.time ? `Kh√¥ng qu√° ${proc.time} ng√†y l√†m vi·ªác.` : 'T√πy quy tr√¨nh.'}</p>${proc.notes.length > 0 ? `<strong class="text-slate-800">L∆∞u √Ω:</strong><ul class="space-y-2 text-slate-600 mt-2 pl-5">${proc.notes.map(n => `<li>${n}</li>`).join('')}</ul>` : ''}</div></div></div>`;
                    detailsSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
                });
                cardWrapper.appendChild(card);
                proceduresGrid.appendChild(cardWrapper);
            });
            
            const timeChartData = proceduresData.filter(p => p.time !== null).sort((a,b) => a.time - b.time);
            const timeChartContainer = document.getElementById('time-chart-container');
            const timeChartCanvas = document.getElementById('timeChart');
            timeChartContainer.style.height = `${80 + timeChartData.length * 32}px`;
            
            if (timeChartInstance) timeChartInstance.destroy();
            timeChartInstance = new Chart(timeChartCanvas.getContext('2d'), {
                type: 'bar', data: { labels: timeChartData.map(p => p.title), datasets: [{ label: 'S·ªë ng√†y l√†m vi·ªác t·ªëi ƒëa', data: timeChartData.map(p => p.time), backgroundColor: '#3b82f6', borderColor: '#1e3a8a', borderWidth: 1, borderRadius: 4 }] },
                options: { indexAxis: 'y', responsive: true, maintainAspectRatio: false, scales: { x: { beginAtZero: true, title: { display: true, text: 'S·ªë ng√†y l√†m vi·ªác' } }, y: { ticks: { autoSkip: false, font: { size: 12 } } } }, plugins: { legend: { display: false }, tooltip: { callbacks: { label: (c) => `S·ªë ng√†y: ${c.parsed.x}` } } } }
            });
        }
        
        // --- FEE CALCULATOR LOGIC ---
        function setupFeeCalculator() {
            const procedureEl = document.getElementById('feeProcedureType');
            const applicantEl = document.getElementById('applicantType');
            const regionEl = document.getElementById('region');
            const costDirectEl = document.getElementById('cost-direct');
            const costOnlineEl = document.getElementById('cost-online');
            const savingsEl = document.getElementById('savings');

            const populateSelect = (el, options) => { el.innerHTML = options.map(o => `<option value="${o.value}">${o.text}</option>`).join(''); };
            populateSelect(procedureEl, feeProcedureOptions);
            populateSelect(applicantEl, applicantOptions);
            populateSelect(regionEl, regionOptions);
            
            function formatCurrency(value) { return new Intl.NumberFormat('vi-VN', { style: 'currency', currency: 'VND' }).format(value); }
            
            function calculateCost() {
                const procedure = procedureEl.value;
                const applicant = applicantEl.value;
                const region = regionEl.value;
                let lePhi = 0;
                const lePhiType = (procedure.startsWith('cap_moi')) ? 'cap_moi' : 'cap_doi';
                if (feeData.le_phi[applicant]?.[region]) { lePhi = feeData.le_phi[applicant][region][lePhiType] || 0; }
                if (procedure === 'bien_dong_xacnhan' || procedure === 'cap_moi_taisankhong') { lePhi = (applicant === 'canhan') ? ((region === 'thanhpho') ? 39000 : 20000) : 50000; }
                const lePhiOnline = (applicant === 'canhan') ? 0 : lePhi;
                const phiThamDinh = feeData.phi_tham_dinh[applicant]?.[procedure];

                if (!phiThamDinh) { costDirectEl.textContent = "Kh√¥ng √°p d·ª•ng"; costOnlineEl.textContent = "Kh√¥ng √°p d·ª•ng"; savingsEl.textContent = ""; return; }
                const totalDirect = lePhi + phiThamDinh.direct;
                const totalOnline = lePhiOnline + phiThamDinh.online;
                savingsEl.innerHTML = `üí∞ Ti·∫øt ki·ªám ${formatCurrency(totalDirect - totalOnline)} khi n·ªôp tr·ª±c tuy·∫øn!`;
                costDirectEl.textContent = formatCurrency(totalDirect);
                costOnlineEl.textContent = formatCurrency(totalOnline);
            }
            [procedureEl, applicantEl, regionEl].forEach(el => el.addEventListener('change', calculateCost));
            calculateCost();
        }

        // --- LEGAL DOCS ACCORDION LOGIC ---
        function setupLegalDocs() {
            const container = document.getElementById('legal-library-accordion');
            legalData.forEach(categoryData => {
                const categoryItem = document.createElement('div');
                categoryItem.className = 'accordion-item bg-white rounded-lg shadow-md border border-slate-200';
                categoryItem.innerHTML = `
                    <div class="accordion-header flex justify-between items-center p-4">
                        <h3 class="font-semibold text-slate-800 text-lg">${categoryData.category}</h3>
                        <span class="accordion-icon text-blue-500 font-bold text-xl">‚ñº</span>
                    </div>
                    <div class="accordion-content px-4 pb-4 space-y-2">
                        ${categoryData.procedures.map(proc => `
                            <div class="accordion-item sub-accordion-item border-t">
                                <div class="accordion-header flex justify-between items-center py-3">
                                    <h4 class="font-medium text-slate-700">${proc.title}</h4>
                                    <span class="accordion-icon text-slate-500 font-bold">‚ñº</span>
                                </div>
                                <div class="accordion-content pl-4 pb-3 text-slate-600">${proc.content}</div>
                            </div>
                        `).join('')}
                    </div>
                `;
                container.appendChild(categoryItem);
            });
            container.addEventListener('click', function(e) {
                const header = e.target.closest('.accordion-header');
                if (header) {
                    header.parentElement.classList.toggle('active');
                }
            });
        }
        
        // --- INITIALIZATION ---
        setupProcedureTool();
        setupFeeCalculator();
        setupLegalDocs();
        navigateTo(window.location.hash ? window.location.hash.substring(1) : 'thu-tuc');
    });
    </script>
</body>
</html>
